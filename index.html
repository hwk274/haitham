<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Cairo',sans-serif;background:#f4f6fb;color:#333;line-height:1.6;scroll-behavior:smooth;}
a{text-decoration:none;color:inherit;}

/* Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© */
header{
  position:relative;
  background:#1e3c72;
  height:250px;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  color:#fff;
  overflow:hidden;
}
header .moving-text{
  font-size:1.8rem;
  font-weight:700;
  animation:moveText 12s linear infinite;
  font-family:'Amiri', serif;
}
@keyframes moveText{
  0% {transform: translateX(100%);}
  50% {transform: translateX(-100%);}
  100% {transform: translateX(100%);}
}

/* Ø§Ù„ØªÙ†Ù‚Ù„ */
nav{
  position:fixed;top:0;left:0;width:100%;display:flex;justify-content:center;gap:15px;
  background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);
  box-shadow:0 3px 15px rgba(0,0,0,.15);padding:12px 0;z-index:1000;
}
nav a{
  padding:12px 28px;font-weight:600;border-radius:8px;color:#1e3c72;transition:0.3s;
}
nav a:hover{background:#1e3c72;color:#fff;}

/* Ø£Ù‚Ø³Ø§Ù… */
section{max-width:1150px;margin:100px auto;padding:40px 20px;text-align:center;}
section h2{font-size:2.3rem;margin-bottom:35px;color:#1e3c72;position:relative;display:inline-block;}
section h2::after{content:"";width:60px;height:3px;background:#1e3c72;display:block;margin:10px auto;border-radius:2px;}

/* Ù‚Ø³Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
#alerts{background:#fff3f0;padding:30px 15px;border-radius:15px;margin-bottom:40px;box-shadow:0 6px 18px rgba(0,0,0,.12);}
#alerts .cards{display:flex;flex-wrap:wrap;gap:15px;justify-content:center;}
#alerts .card{width:220px;background:#fdecea;padding:15px;border-radius:12px;box-shadow:0 5px 12px rgba(0,0,0,.1);transition:0.3s;opacity:0;transform:translateY(20px);}
#alerts .card.visible{opacity:1;transform:translateY(0);}
#alerts .card h3{font-size:1rem;margin-bottom:5px;color:#c0392b;}
#alerts .card p{font-size:0.85rem;color:#555;}

/* ÙƒØ±ÙˆØª Ø§Ù„Ø®Ø¯Ù…Ø§Øª */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  margin-top:20px;
}
.card{
  background:linear-gradient(145deg,#ffffff,#e6edff);
  padding:25px 15px;border-radius:15px;
  box-shadow:0 6px 20px rgba(0,0,0,.1);
  transition:transform .4s ease,box-shadow .4s ease,opacity .6s,transform .6s;
  text-align:center;opacity:0; transform: translateY(30px);
}
.card.visible{
  opacity:1; transform: translateY(0);
}
.card:hover{
  transform:translateY(-10px) scale(1.03);
  box-shadow:0 12px 25px rgba(0,0,0,.2);
}
.card h3{margin-bottom:10px;color:#1e3c72;font-size:1.2rem;font-weight:700;}
.card p{font-size:0.95rem;color:#555;margin-bottom:5px;}
.card .icon{font-size:2.8rem;margin-bottom:10px;display:block;transition:transform .6s,color .3s;}
.card:hover .icon{transform:rotate(360deg);color:#1e3c72;}
.card small{color:#888;font-size:0.8rem;display:block;margin-top:3px;}
.card a{display:block;color:inherit;}

/* Ø£Ø²Ø±Ø§Ø± */
.btn{display:inline-block;margin-top:20px;padding:12px 28px;background:#1e3c72;color:#fff;border-radius:10px;transition:0.3s;font-weight:600;}
.btn:hover{background:#203a43;}

/* Ø§Ù„ÙÙˆØªØ± */
footer{background:#1e3c72;color:#fff;text-align:center;padding:25px;font-size:0.9rem;letter-spacing:0.5px;}

/* Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§ØªØ³Ø§Ø¨ */
.whatsapp{position:fixed;bottom:25px;left:25px;width:65px;height:65px;background:#25D366;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 20px rgba(0,0,0,.4);z-index:1000}
.whatsapp img{width:36px;}
</style>
</head>
<body>

<header>
<div class="moving-text">Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª Ø³Ø¨Ø­Ø§Ù†Ùƒ Ø¥Ù†ÙŠ ÙƒÙ†Øª Ù…Ù† Ø§Ù„Ø¸Ø§Ù„Ù…ÙŠÙ†</div>
</header>

<nav>
<a href="#alerts">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</a>
<a href="#services">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
<a href="employees.html">Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</a>
<a href="cars.html">Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a>
<a href="records.html">Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©</a>
<a href="#contact">Ø§Ù„ØªÙˆØ§ØµÙ„</a>
</nav>

<!-- Ù‚Ø³Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
<section id="alerts">
<h2>ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø±Ø¨ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</h2>
<div class="cards" id="alertCards">
  <!-- ÙƒØ±ÙˆØª Ù…Ø¤Ù‚ØªØ© Ù‚Ø¨Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
  <div class="card visible"><span class="icon">â„¹ï¸</span><h3>ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</h3><p>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p></div>
</div>
</section>

<!-- ÙƒØ±ÙˆØª Ø§Ù„Ø®Ø¯Ù…Ø§Øª -->
<section id="services">
<h2>Ø®Ø¯Ù…Ø§ØªÙ†Ø§</h2>
<div class="cards">
  <div class="card visible"><a href="employees.html"><span class="icon">ğŸ‘¥</span><h3>Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h3><p>Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</p><small>Ø§Ù„ØµÙØ­Ø©: employees.html</small></a></div>
  <div class="card visible"><a href="cars.html"><span class="icon">ğŸš—</span><h3>Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</h3><p>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø´Ø±ÙƒØ©</p><small>Ø§Ù„ØµÙØ­Ø©: cars.html</small></a></div>
  <div class="card visible"><a href="records.html"><span class="icon">ğŸ“‚</span><h3>Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©</h3><p>Ù…Ø³ØªÙ†Ø¯Ø§Øª ÙˆØ³Ø¬Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø±Ø³Ù…ÙŠØ©</p><small>Ø§Ù„ØµÙØ­Ø©: records.html</small></a></div>
  <div class="card visible"><a href="table.html"><span class="icon">ğŸ“…</span><h3>Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø§Øª</h3><p>Ø¹Ø±Ø¶ ØªÙˆØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø§Øª Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†</p><small>Ø§Ù„ØµÙØ­Ø©: table.html</small></a></div>
</div>
</section>

<section id="contact">
<h2>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h2>
<a class="btn" href="mailto:hwk2@hotmail.com">Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯</a>
</section>

<footer>
Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025
</footer>

<a class="whatsapp" href="https://wa.me/966558020154" target="_blank">
<img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
</a>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWS2KglkUT8Pc3L39dcKFosvR3LWKNQv_EVmYbsLZKx2MBVS33EZQGjk6Yb1mmR9XKKaPK_6qVzbi5/pub?output=csv";

function parseDate(str) {
  if(!str) return null;
  str = str.toString().trim();
  let d = Date.parse(str);
  if(!isNaN(d)) return new Date(d);
  if(str.includes("/")) { let p=str.split("/").map(x=>parseInt(x)); if(p.length===3) return new Date(p[2],p[1]-1,p[0]); }
  if(str.includes("-")) { let p=str.split("-").map(x=>parseInt(x)); if(p.length===3) return new Date(p[2],p[1]-1,p[0]); }
  return null;
}

function daysUntil(date){ 
  if(!date||isNaN(date)) return null; 
  const t=new Date(); t.setHours(0,0,0,0); date.setHours(0,0,0,0); 
  return Math.ceil((date-t)/(1000*60*60*24)); 
}

function renderAlerts(data){
  const container = document.getElementById("alertCards");
  container.innerHTML = "";
  let count=0;
  data.forEach(row=>{
    const resDays = daysUntil(parseDate(row["ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ù‚Ø§Ù…Ø©"]));
    if(resDays !== null && resDays <= 30){
      const card = document.createElement("div");
      card.className = "card";
      const warnText = resDays <=3 ? "âš ï¸ ØªÙ†ØªÙ‡ÙŠ Ø¨Ø¹Ø¯ " + resDays + " Ø£ÙŠØ§Ù… (ØªØ­Ø°ÙŠØ±!)" : "ØªÙ†ØªÙ‡ÙŠ Ø¨Ø¹Ø¯ " + resDays + " Ø£ÙŠØ§Ù…";
      card.innerHTML = `<span class="icon">âš ï¸</span>
                        <h3>${row["Ø§Ù„Ø§Ø³Ù…"]||"-"}</h3>
                        <p>${warnText}</p>`;
      container.appendChild(card);
      count++;
    }
  });
  if(count===0){
    container.innerHTML = `<div class="card visible"><span class="icon">âœ…</span><h3>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h3><p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø§Øª ØµØ§Ù„Ø­Ø©</p></div>`;
  }

  const alertCards = container.querySelectorAll('.card');
  const observer = new IntersectionObserver(entries=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){
        entry.target.classList.add('visible');
      }
    });
  }, {threshold:0.2});
  alertCards.forEach(card => observer.observe(card));
}

Papa.parse(csvUrl, { 
  download:true, 
  header:true, 
  complete:function(results){
    const allData = results.data.map(r=>{
      const cleanRow={}; 
      for(let key in r){ cleanRow[key.trim()] = r[key]?.trim(); } 
      return cleanRow; 
    });
    renderAlerts(allData);
  }
});
</script>

</body>
</html>
