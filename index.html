<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Cairo',sans-serif;background:#f4f6fb;color:#333}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± */
header{
  background:linear-gradient(135deg,#1e3c72,#2a5298,#4069d8);
  color:#fff;
  padding:120px 20px 90px;
  text-align:center;
  position:relative;
  overflow:hidden;
}

/* Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØªØ­Ø±Ùƒ */
.moving-text{
  font-size:22px;
  font-weight:700;
  margin-top:25px;
  color:#fff;
  letter-spacing:1px;
  display:inline-block;
  animation:floatText 7s infinite ease-in-out;
}

@keyframes floatText{
  0%{transform:translateY(0);opacity:1}
  50%{transform:translateY(-12px);opacity:.9}
  100%{transform:translateY(0);opacity:1}
}

header h1{font-size:38px;margin-bottom:10px}
header p{font-size:18px;opacity:.9}

/* Ø§Ù„ØªÙ†Ù‚Ù„ */
nav{
  position:fixed;
  top:0;
  width:100%;
  background:#ffffffef;
  box-shadow:0 4px 15px rgba(0,0,0,.15);
  padding:12px 0;
  display:flex;
  justify-content:center;
  gap:12px;
  z-index:1000;
}
nav a{
  color:#1e3c72;
  font-weight:700;
  padding:10px 22px;
  background:#eef2ff;
  border-radius:10px;
  transition:.3s;
}
nav a:hover{background:#1e3c72;color:#fff}

/* Ø£Ù‚Ø³Ø§Ù… */
section{max-width:1100px;margin:50px auto;padding:20px;text-align:center}
section h2{color:#1e3c72;margin-bottom:25px}

/* ÙƒØ±ÙˆØª */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:25px;
}
.card{
  background:linear-gradient(145deg,#ffffff,#e6edff);
  padding:25px;
  border-radius:18px;
  box-shadow:0 7px 20px rgba(0,0,0,.1);
  transition:.4s;
}
.card:hover{
  transform:translateY(-10px);
  box-shadow:0 18px 35px rgba(0,0,0,.25);
}
.card .icon{font-size:40px;margin-bottom:10px}
.card h3{color:#1e3c72}

/* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
#alerts{background:#fff3f0;border-radius:16px;padding:30px;margin-bottom:40px}
#alerts h2{color:#e74c3c;margin-bottom:20px}
.card.warn{background:#ffe6e6}

/* Ø²Ø± */
.btn{
  display:inline-block;
  margin-top:15px;
  padding:12px 30px;
  background:#1e3c72;
  color:#fff;
  border-radius:10px;
}
</style>
</head>

<body>

<nav>
<a href="#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
<a href="#alerts">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</a>
<a href="#services">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
<a href="idea.html">Ø§Ù„ÙÙƒØ±Ø©</a>
<a href="#contact">Ø§Ù„ØªÙˆØ§ØµÙ„</a>
</nav>

<header id="home">
  <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø±ÙƒØ©</h1>
  <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø´ÙƒÙ„ Ù…Ø±ÙƒØ²ÙŠ ÙˆÙ…Ù†Ø¸Ù…</p>

  <div class="moving-text">
    Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª Ø³Ø¨Ø­Ø§Ù†Ùƒ Ø¥Ù†ÙŠ ÙƒÙ†Øª Ù…Ù† Ø§Ù„Ø¸Ø§Ù„Ù…ÙŠÙ†
  </div>
</header>

<section id="alerts">
<h2>ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø±Ø¨ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© / Ø§Ù„Ø¬ÙˆØ§Ø² / Ø§Ù„Ø¹Ù‚Ø¯</h2>
<div class="cards" id="alertCards"></div>
</section>

<section id="services">
<h2>Ø§Ù„Ø®Ø¯Ù…Ø§Øª</h2>
<div class="cards">
<div class="card"><a href="employees.html"><span class="icon">ğŸ‘¥</span><h3>Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h3></a></div>
<div class="card"><a href="table.html"><span class="icon">ğŸ“…</span><h3>Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø§Øª</h3></a></div>
<div class="card"><a href="records.html"><span class="icon">ğŸ“‚</span><h3>Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©</h3></a></div>
<div class="card"><a href="vehicles.html"><span class="icon">ğŸš—</span><h3>Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</h3></a></div>
</div>
</section>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWS2KglkUT8Pc3L39dcKFosvR3LWKNQv_EVmYbsLZKx2MBVS33EZQGjk6Yb1mmR9XKKaPK_6qVzbi5/pub?output=csv";

function parseDate(str){
  if(!str) return null;
  str=str.trim();
  let d = Date.parse(str);
  if(!isNaN(d)) return new Date(d);
  if(str.includes("/")){let p=str.split("/");return new Date(p[2],p[1]-1,p[0]);}
  if(str.includes("-")){let p=str.split("-");return new Date(p[0],p[1]-1,p[2]);}
  return null;
}

function daysUntil(date){
  if(!date) return null;
  const t=new Date();t.setHours(0,0,0,0);
  date.setHours(0,0,0,0);
  return Math.ceil((date-t)/(1000*60*60*24));
}

function renderAlerts(data){
  const c=document.getElementById("alertCards");
  c.innerHTML="";
  data.forEach(r=>{
    const name=r["Ø§Ù„Ø§Ø³Ù…"];
    const res=daysUntil(parseDate(r["ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ù‚Ø§Ù…Ø©"]));
    if(res!==null && res<=30){
      let div=document.createElement("div");
      div.className="card "+(res<=3?"warn":"");
      div.innerHTML=`<span class='icon'>âš ï¸</span><h3>${name}</h3><p>Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© Ø³ØªÙ†ØªÙ‡ÙŠ Ø¨Ø¹Ø¯ ${res} ÙŠÙˆÙ…</p>`;
      c.appendChild(div);
    }
  });
}

Papa.parse(csvUrl,{download:true,header:true,complete:(r)=>renderAlerts(r.data)});
</script>

</body>
</html>
