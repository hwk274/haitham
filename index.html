<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:'Cairo',sans-serif;
  background:#f0f2f8;
  color:#333;
  line-height:1.6;
  scroll-behavior:smooth;
  transition: background 0.3s, color 0.3s;
}
:root{
  --main:#1e3c72;
  --second:#4a69ff;
  --gradient:linear-gradient(135deg,#1e3c72,#4a69ff);
  --card-bg:#ffffff;
  --card-hover:#f0f4ff;
  --alert-bg:#fff5f5;
  --nav-bg:rgba(255,255,255,.97);
  --footer-bg:var(--gradient);
}
body.dark{
  --main:#a6c1ff;
  --second:#5a7dff;
  --gradient:linear-gradient(135deg,#1a1a2e,#162447);
  --card-bg:#1f1f2e;
  --card-hover:#2a2a3c;
  --alert-bg:#3a3a4f;
  --nav-bg:rgba(30,30,50,.97);
  --footer-bg:linear-gradient(135deg,#1a1a2e,#162447);
  color:#ddd;
}

/* Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© */
header{
  height:220px;
  background:var(--gradient);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  text-align:center;
  position:relative;
  border-bottom-left-radius:25px;
  border-bottom-right-radius:25px;
  box-shadow:0 5px 15px rgba(0,0,0,0.15);
}
header .moving-text{
  font-size:1.8rem;
  font-weight:800;
  animation:moveText 12s linear infinite;
  white-space:nowrap;
}
@keyframes moveText{
  0%{transform:translateX(100%);}
  50%{transform:translateX(-100%);}
  100%{transform:translateX(100%);}
}

/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
nav{
  position:fixed;top:0;width:100%;
  background:var(--nav-bg);
  box-shadow:0 5px 20px rgba(0,0,0,.12);
  display:flex;justify-content:center;gap:18px;
  padding:14px 0;
  z-index:1000;
  font-weight:600;
  border-bottom:1px solid #ddd;
  transition: background 0.3s;
}
nav a{
  padding:10px 22px;
  border-radius:12px;
  color:var(--main);
  font-weight:600;
  transition:.3s;
}
nav a:hover{
  background:var(--main);
  color:#fff;
}

/* Ø²Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¯Ø§ÙƒÙ† */
#darkModeToggle{
  position:fixed;
  top:18px;
  right:20px;
  padding:10px 16px;
  background:var(--gradient);
  color:#fff;
  border:none;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
  z-index:1001;
  transition:.3s;
}
#darkModeToggle:hover{opacity:0.85;}

/* Ø£Ù‚Ø³Ø§Ù… */
section{
  max-width:1150px;
  margin:120px auto 60px auto;
  padding:40px 25px;
  text-align:center;
  border-radius:20px;
  transition: background 0.3s, color 0.3s;
}
section h2{
  font-size:2.2rem;
  margin-bottom:30px;
  color:var(--main);
  font-weight:800;
  position:relative;
}
section h2::after{
  content:"";
  width:80px;
  height:4px;
  background:var(--second);
  display:block;
  margin:10px auto 0 auto;
  border-radius:5px;
}

/* ÙƒØ±Øª Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
.alert-counter-box{
  background:var(--card-bg);
  border-radius:15px;
  padding:20px;
  margin-bottom:30px;
  box-shadow:0 8px 25px rgba(0,0,0,.12);
  display:flex;
  justify-content:center;
  gap:12px;
  align-items:center;
  font-size:1.2rem;
  font-weight:700;
  transition: background 0.3s, color 0.3s;
}
.alert-number{
  background:#ff4747;
  color:#fff;
  padding:8px 18px;
  border-radius:50px;
  font-size:1.1rem;
}

/* Ù‚Ø³Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
#alerts, #carAlerts{
  background:var(--card-bg);
  border-radius:18px;
  padding:30px 25px;
  box-shadow:0 8px 25px rgba(0,0,0,.12);
  margin-bottom:50px;
}
#alerts .cards, #carAlerts .cards{
  display:flex;
  flex-wrap:wrap;
  gap:25px;
  justify-content:center;
}
#alerts .card, #carAlerts .card{
  width:240px;
  background:var(--alert-bg);
  padding:18px;
  border-radius:18px;
  box-shadow:0 6px 18px rgba(0,0,0,.12);
  opacity:0;
  transform:translateY(30px);
  transition:.6s, background 0.3s, color 0.3s, transform 0.3s;
}
#alerts .card.visible, #carAlerts .card.visible{opacity:1;transform:translateY(0);}
#alerts .card h3, #carAlerts .card h3{color:#b00020;margin-bottom:6px;}
#alerts .card p, #carAlerts .card p{font-size:0.95rem;}
#alerts .icon svg, #carAlerts .icon svg{width:45px;height:45px;fill:#ff5c5c;margin-bottom:10px;}

/* ÙƒØ±ÙˆØª Ø§Ù„Ø®Ø¯Ù…Ø§Øª */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
  gap:25px;
}
.card{
  background:var(--card-bg);
  padding:25px;
  border-radius:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.12);
  opacity:0;
  transform:translateY(30px);
  transition:.6s, transform .3s ease, background 0.3s, color 0.3s;
  cursor:pointer;
}
.card.visible{opacity:1;transform:translateY(0);}
.card:hover{
  transform:translateY(-10px) scale(1.03);
  background:var(--card-hover);
}
.card h3{color:var(--main); font-weight:700;}
.card p{color:#555; font-size:0.95rem;}
.card .icon svg{
  width:55px;height:55px;
  margin-bottom:10px;
  transition:.6s;
  fill:var(--second);
}
.card:hover .icon svg{
  transform:rotate(360deg);
}

/* Ø²Ø± */
.btn{
  padding:12px 30px;
  background:var(--gradient);
  color:#fff;
  border-radius:12px;
  font-weight:700;
  transition:.3s;
}
.btn:hover{
  transform:scale(1.05);
  box-shadow:0 6px 18px rgba(0,0,0,.15);
}

/* Ø§Ù„ÙÙˆØªØ± */
footer{
  background:var(--footer-bg);
  color:#fff;
  text-align:center;
  padding:30px;
  font-weight:600;
  border-top-left-radius:25px;
  border-top-right-radius:25px;
  transition: background 0.3s;
}

/* ÙˆØ§ØªØ³Ø§Ø¨ */
.whatsapp{
  position:fixed;
  bottom:25px;
  left:25px;
  width:65px;height:65px;
  background:#25D366;
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 5px 15px rgba(0,0,0,.2);
  transition:.3s;
}
.whatsapp:hover{transform:scale(1.1);}
.whatsapp img{width:36px;}
</style>
</head>
<body>

<button id="darkModeToggle">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†</button>

<header>
  <div class="moving-text">Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª Ø³Ø¨Ø­Ø§Ù†Ùƒ Ø¥Ù†ÙŠ ÙƒÙ†Øª Ù…Ù† Ø§Ù„Ø¸Ø§Ù„Ù…ÙŠÙ†</div>
</header>

<nav>
  <a href="#alerts">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</a>
  <a href="#carAlerts">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a>
  <a href="#services">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
  <a href="employees.html">Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</a>
  <a href="cars.html">Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a>
  <a href="records.html">Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©</a>
  <a href="#contact">Ø§Ù„ØªÙˆØ§ØµÙ„</a>
</nav>

<!-- Ù‚Ø³Ù… ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø¥Ù‚Ø§Ù…Ø© -->
<section id="alerts">
<h2>ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø±Ø¨ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</h2>
<div class="alert-counter-box">
  ğŸ”” Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª:
  <span class="alert-number" id="alertCount">0</span>
</div>
<div class="cards" id="alertCards">
  <div class="card visible">
    <div class="icon"><svg><circle cx="20" cy="20" r="18"/></svg></div>
    <h3>Ø¬Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</h3>
    <p>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
  </div>
</div>
</section>

<!-- Ù‚Ø³Ù… ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª -->
<section id="carAlerts">
<h2>ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</h2>
<div class="alert-counter-box">
  ğŸš— Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª:
  <span class="alert-number" id="carAlertCount">0</span>
</div>
<div class="cards" id="carAlertCards">
  <div class="card visible">
    <div class="icon"><svg><circle cx="20" cy="20" r="18"/></svg></div>
    <h3>Ø¬Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</h3>
    <p>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
  </div>
</div>
</section>

<!-- Ù‚Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø§Øª -->
<section id="services">
<h2>Ø®Ø¯Ù…Ø§ØªÙ†Ø§</h2>
<div class="cards">
  <div class="card visible">
  <a href="employees.html">
    <div class="icon"><svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zM8 11c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V20h14v-3.5C15 14.17 10.33 13 8 13zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V20h6v-3.5C23 14.17 18.33 13 16 13z"/></svg></div>
    <h3>Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h3>
    <p>Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</p>
  </a>
  </div>

  <div class="card visible">
  <a href="cars.html">
    <div class="icon"><svg viewBox="0 0 24 24"><path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99z"/></svg></div>
    <h3>Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</h3>
    <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª ÙˆØ§Ù„Ø³Ø¬Ù„Ø§Øª</p>
  </a>
  </div>
</div>
</section>

<section id="contact">
<h2>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h2>
<a class="btn" href="mailto:hwk2@hotmail.com">Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯</a>
</section>

<footer>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025</footer>

<a class="whatsapp" href="https://wa.me/966558020154" target="_blank">
<img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg">
</a>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
const csvUrlResidency = "YOUR_RESIDENCY_CSV_URL";
const csvUrlCars = "YOUR_CARS_CSV_URL";

function parseDate(str){ if(!str) return null; let d=Date.parse(str); if(!isNaN(d)) return new Date(d); return null; }
function daysUntil(date){ if(!date) return null; const t=new Date(); t.setHours(0,0,0,0); date.setHours(0,0,0,0); return Math.ceil((date-t)/(86400000)); }

function renderAlerts(residencyData, carsData){
  const container = document.getElementById("alertCards");
  const counter = document.getElementById("alertCount");
  container.innerHTML = "";
  let count = 0;

  residencyData.forEach(row=>{
    const res = daysUntil(parseDate(row["ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ù‚Ø§Ù…Ø©"]));
    if(res!==null && res<=30){
      count++;
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `<div class="icon"><svg viewBox="0 0 24 24"><path d="M1 21h22L12 2 1 21z"/></svg></div>
      <h3>${row["Ø§Ù„Ø§Ø³Ù…"]||"-"}</h3>
      <p>ØªÙ†ØªÙ‡ÙŠ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© Ø¨Ø¹Ø¯ ${res} ÙŠÙˆÙ…</p>`;
      container.appendChild(card);
    }
  });
  counter.textContent = count;
  if(count===0){
    container.innerHTML = `<div class="card visible"><div class="icon"><svg viewBox="0 0 24 24"><path d="M9 16.17 4.83 12 3.41 13.41 9 19l12-12-1.41-1.41z"/></svg></div><h3>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h3><p>ÙƒÙ„ Ø´ÙŠØ¡ Ø³Ù„ÙŠÙ…</p></div>`;
  }
  document.querySelectorAll('#alertCards .card').forEach(c=>{ setTimeout(()=>c.classList.add('visible'),300); });

  // ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª
  const carContainer = document.getElementById("carAlertCards");
  const carCounter = document.getElementById("carAlertCount");
  carContainer.innerHTML="";
  let carCount=0;
  carsData.forEach(car=>{
    const fields = ["Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙØ­Øµ","Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©","Ø§Ù†ØªÙ‡Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªØ´ØºÙŠÙ„","Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ§Ù…ÙŠÙ†"];
    fields.forEach(field=>{
      const d = daysUntil(parseDate(car[field]));
      if(d!==null && d<=30){
        carCount++;
        const card = document.createElement("div");
        card.className="card";
        const status = d<0 ? "Ø§Ù†ØªÙ‡Øª" : `ØªÙ†ØªÙ‡ÙŠ Ø¨Ø¹Ø¯ ${d} ÙŠÙˆÙ…`;
        card.innerHTML = `<div class="icon"><svg viewBox="0 0 24 24"><path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99z"/></svg></div>
        <h3>${car["Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©"]||"-"} - ${car["Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©"]||"-"}</h3>
        <p>${field}: ${status}</p>`;
        carContainer.appendChild(card);
      }
    });
  });
  carCounter.textContent=carCount;
  if(carCount===0){
    carContainer.innerHTML=`<div class="card visible"><div class="icon"><svg viewBox="0 0 24 24"><path d="M9 16.17 4.83 12 3.41 13.41 9 19l12-12-1.41-1.41z"/></svg></div><h3>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h3><p>ÙƒÙ„ Ø´ÙŠØ¡ Ø³Ù„ÙŠÙ…</p></div>`;
  }
  document.querySelectorAll('#carAlertCards .card').forEach(c=>{ setTimeout(()=>c.classList.add('visible'),300); });
}

// ØªØ­Ù…ÙŠÙ„ CSV
let residencyData=[], carsData=[];
Papa.parse(csvUrlResidency,{download:true,header:true,complete:function(results){ residencyData=results.data; if(carsData.length) renderAlerts(residencyData,carsData); }});
Papa.parse(csvUrlCars,{download:true,header:true,complete:function(results){ carsData=results.data; if(residencyData.length) renderAlerts(residencyData,carsData); }});

// Dark Mode
const toggle = document.getElementById("darkModeToggle");
if(localStorage.getItem("darkMode") === "true"){ document.body.classList.add("dark"); }
function updateButtonText(){ toggle.textContent = document.body.classList.contains("dark") ? "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­" : "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†"; }
updateButtonText();
toggle.addEventListener("click", ()=>{
  document.body.classList.toggle("dark");
  localStorage.setItem("darkMode", document.body.classList.contains("dark"));
  updateButtonText();
});
</script>
</body>
</html>
